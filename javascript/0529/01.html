<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>자바스크립트로 스크롤 처리</title>
        <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
        <style>
            * {
                margin: 0;
                padding: 0;
            }
            main {
                height: 300vh;
                background-color: #888;
            }
            .progress {
                width: 0;
                height: 20px;
                position: fixed;
                top: 0;
                left: 0;
                background-color: tomato;
            }
        </style>
    </head>
    <body>
        <main>
            <div class="progress"></div>
        </main>

        <script>
            // ScrollTrigger 플러그인을 gsap에 등록해야 사용할 수 있음
            gsap.registerPlugin(ScrollTrigger);

            // ".progress" 요소의 width를 스크롤에 따라 100%까지 늘림
            gsap.to(".progress", {
                width: "100%", // width가 점점 늘어나 100%에 도달함
                ease: "none", // 가속 없이 스크롤 속도와 정확히 동기화됨
                scrollTrigger: {
                    trigger: document.body, // 스크롤 감지의 기준 대상: 전체 문서
                    start: "top top", // 문서의 top이 뷰포트의 top에 닿을 때 애니메이션 시작
                    end: "bottom bottom", // 문서의 bottom이 뷰포트의 bottom에 닿을 때 애니메이션 끝
                    scrub: true, // 스크롤 위치에 따라 실시간으로 애니메이션 동기화
                },
            });
        </script>
    </body>
</html>
